# Generated by Django 5.2.9 on 2025-12-26 04:11

import app.validators
import django.core.validators
import django.db.models.deletion
import simple_history.models
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterField(
            model_name='documento',
            name='archivo',
            field=models.FileField(help_text='Archivos permitidos: PDF, imágenes (JPG, PNG), documentos Office. Máximo 10MB.', upload_to='documentos/%Y/%m/', validators=[app.validators.FileValidator()], verbose_name='Archivo'),
        ),
        migrations.CreateModel(
            name='HistoricalDocumento',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('tipo_documento', models.CharField(choices=[('poliza', 'Póliza de Seguro'), ('factura', 'Factura'), ('comprobante_pago', 'Comprobante de Pago'), ('informe_tecnico', 'Informe Técnico'), ('denuncia', 'Denuncia'), ('proforma', 'Proforma'), ('carta_formal', 'Carta Formal'), ('fotografia', 'Fotografía'), ('otro', 'Otro')], max_length=30, verbose_name='Tipo de Documento')),
                ('nombre', models.CharField(max_length=200, verbose_name='Nombre del Documento')),
                ('descripcion', models.TextField(blank=True, verbose_name='Descripción')),
                ('fecha_subida', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Subida')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('factura', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.factura', verbose_name='Factura')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('poliza', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.poliza', verbose_name='Póliza')),
                ('siniestro', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.siniestro', verbose_name='Siniestro')),
                ('subido_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Subido por')),
            ],
            options={
                'verbose_name': 'Historial',
                'verbose_name_plural': 'Historial de cambios',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalFactura',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('numero_factura', models.CharField(db_index=True, max_length=100, verbose_name='Número de Factura')),
                ('fecha_emision', models.DateField(verbose_name='Fecha de Emisión')),
                ('fecha_vencimiento', models.DateField(verbose_name='Fecha de Vencimiento')),
                ('subtotal', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Subtotal')),
                ('iva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='IVA')),
                ('contribucion_superintendencia', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Contribución Superintendencia (3.5%)')),
                ('contribucion_seguro_campesino', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Contribución Seguro Campesino (0.5%)')),
                ('retenciones', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Retenciones')),
                ('descuento_pronto_pago', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Descuento por Pronto Pago')),
                ('monto_total', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Monto Total')),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('pagada', 'Pagada'), ('parcial', 'Pago Parcial'), ('vencida', 'Vencida')], default='pendiente', max_length=20, verbose_name='Estado')),
                ('fecha_creacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Creación')),
                ('fecha_modificacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Modificación')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('creado_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Creado por')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('poliza', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.poliza', verbose_name='Póliza')),
            ],
            options={
                'verbose_name': 'Historial',
                'verbose_name_plural': 'Historial de cambios',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalPago',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('fecha_pago', models.DateField(verbose_name='Fecha de Pago')),
                ('monto', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Monto Pagado')),
                ('forma_pago', models.CharField(choices=[('transferencia', 'Transferencia Bancaria'), ('cheque', 'Cheque'), ('efectivo', 'Efectivo'), ('tarjeta', 'Tarjeta de Crédito')], max_length=20, verbose_name='Forma de Pago')),
                ('referencia', models.CharField(blank=True, max_length=200, verbose_name='Número de Referencia/Comprobante')),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('aprobado', 'Aprobado'), ('rechazado', 'Rechazado')], default='pendiente', max_length=20, verbose_name='Estado')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('fecha_creacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Creación')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('factura', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.factura', verbose_name='Factura')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('registrado_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Registrado por')),
            ],
            options={
                'verbose_name': 'Historial',
                'verbose_name_plural': 'Historial de cambios',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalPoliza',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('numero_poliza', models.CharField(db_index=True, max_length=100, verbose_name='Número de Póliza')),
                ('suma_asegurada', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Suma Asegurada')),
                ('coberturas', models.TextField(verbose_name='Coberturas Detalladas')),
                ('fecha_inicio', models.DateField(verbose_name='Fecha de Inicio de Vigencia')),
                ('fecha_fin', models.DateField(verbose_name='Fecha de Fin de Vigencia')),
                ('estado', models.CharField(choices=[('vigente', 'Vigente'), ('vencida', 'Vencida'), ('cancelada', 'Cancelada'), ('por_vencer', 'Por Vencer')], default='vigente', max_length=20, verbose_name='Estado')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('fecha_creacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Creación')),
                ('fecha_modificacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Modificación')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('compania_aseguradora', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.companiaaseguradora', verbose_name='Compañía Aseguradora')),
                ('corredor_seguros', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.corredorseguros', verbose_name='Corredor de Seguros')),
                ('creado_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Creado por')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('tipo_poliza', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.tipopoliza', verbose_name='Tipo de Póliza')),
            ],
            options={
                'verbose_name': 'Historial',
                'verbose_name_plural': 'Historial de cambios',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalSiniestro',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('numero_siniestro', models.CharField(db_index=True, max_length=100, verbose_name='Número de Siniestro')),
                ('fecha_siniestro', models.DateTimeField(verbose_name='Fecha y Hora del Siniestro')),
                ('fecha_registro', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Registro')),
                ('bien_nombre', models.CharField(max_length=200, verbose_name='Nombre del Bien')),
                ('bien_modelo', models.CharField(blank=True, max_length=100, verbose_name='Modelo')),
                ('bien_serie', models.CharField(blank=True, max_length=100, verbose_name='Número de Serie')),
                ('bien_marca', models.CharField(blank=True, max_length=100, verbose_name='Marca')),
                ('bien_codigo_activo', models.CharField(blank=True, max_length=100, verbose_name='Código de Activo')),
                ('responsable_custodio', models.CharField(max_length=200, verbose_name='Responsable/Custodio')),
                ('ubicacion', models.CharField(max_length=300, verbose_name='Ubicación del Siniestro')),
                ('causa', models.TextField(verbose_name='Causa del Siniestro')),
                ('descripcion_detallada', models.TextField(verbose_name='Descripción Detallada')),
                ('monto_estimado', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Monto Estimado del Daño')),
                ('monto_indemnizado', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Monto Indemnizado')),
                ('estado', models.CharField(choices=[('registrado', 'Registrado'), ('documentacion_pendiente', 'Documentación Pendiente'), ('enviado_aseguradora', 'Enviado a Aseguradora'), ('en_evaluacion', 'En Evaluación'), ('aprobado', 'Aprobado'), ('rechazado', 'Rechazado'), ('liquidado', 'Liquidado'), ('cerrado', 'Cerrado')], default='registrado', max_length=30, verbose_name='Estado')),
                ('fecha_envio_aseguradora', models.DateField(blank=True, null=True, verbose_name='Fecha de Envío a Aseguradora')),
                ('fecha_respuesta_aseguradora', models.DateField(blank=True, null=True, verbose_name='Fecha de Respuesta de Aseguradora')),
                ('fecha_liquidacion', models.DateField(blank=True, null=True, verbose_name='Fecha de Liquidación')),
                ('observaciones', models.TextField(blank=True, verbose_name='Observaciones')),
                ('fecha_modificacion', models.DateTimeField(blank=True, editable=False, verbose_name='Fecha de Modificación')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('creado_por', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Creado por')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('poliza', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.poliza', verbose_name='Póliza')),
                ('tipo_siniestro', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='app.tiposiniestro', verbose_name='Tipo de Siniestro')),
            ],
            options={
                'verbose_name': 'Historial',
                'verbose_name_plural': 'Historial de cambios',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
    ]
